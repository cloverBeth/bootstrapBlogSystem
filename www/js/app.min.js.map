{"version":3,"sources":["app.js","filter/cardFilter.js","services/checkAuth.js","services/ajaxInterceptor.js","directives/scrollToDir.js","directives/lazyImgDir.js","directives/alertsDir.js","controllers/transactionDetailCtrl.js","controllers/storeSaleCtrl.js","controllers/storeProductCtrl.js","controllers/storeDetailCtrl.js","controllers/storeCtrl.js","controllers/storeCartCtrl.js","controllers/orderSucceedCtrl.js","controllers/orderList.js","controllers/orderDetailCtrl.js","controllers/mainCtrl.js","controllers/loginCtrl.js","controllers/getOrderCtrl.js","controllers/cardLoginCtrl.js","controllers/cardCtrl.js","controllers/addressEditCtrl.js","controllers/addressAccountCtrl.js","controllers/accountCenterCtrl.js","components/flyItem.js","components/cookieTool.js","templates.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/BA,+EAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.min.js","sourcesContent":["\"use strict\";\n\nvar X_context = {\n    guest: \"guest\",\n    api: \"http://192.168.6.43/zjsy/api/v1/\",\n    memberId: null,\n    memberPhone: \"\"\n};\nX_context.authorization = readCookie('authorization') || X_context.authorization;\n\nangular.module('ZJSY_WeChat', [\n//'ngRoute',\n'ui.router',\n//'ui.bootstrap',\n'mobile-angular-ui'])\n\n//.config(function($routeProvider) {\n//    $routeProvider.when('/', {\n//        templateUrl:'home.html',\n//        controller : 'HomeController',\n//        reloadOnSearch: false\n//    })\n//        .when('/test', {\n//            templateUrl:'test.html',\n//            controller : 'TestController',\n//            reloadOnSearch: false\n//        });\n//\n//});\n.config(function ($stateProvider, $urlRouterProvider, $httpProvider) {\n    //$httpProvider.defaults.useXDomain = true;\n    $httpProvider.interceptors.push('ajaxInterceptor');\n    $httpProvider.defaults.headers.post = {\n        \"Content-Type\": \"application/json;charset=utf-8\",\n        \"Authorization\": X_context.authorization\n\n    };\n    $httpProvider.defaults.headers.put = {\n        \"Content-Type\": \"application/json;charset=utf-8\",\n        \"Authorization\": X_context.authorization\n\n    };\n    $httpProvider.defaults.headers.get = {\n        \"Authorization\": X_context.authorization\n\n    };\n    $httpProvider.defaults.headers[\"delete\"] = {\n        \"Content-Type\": \"application/json;charset=utf-8\",\n        \"Authorization\": X_context.authorization\n\n    };\n\n    $stateProvider.state('store', { //将sotreid放在此路由\n        url: '/store/{storeId}',\n        views: {\n            '': {\n                templateUrl: 'store.html',\n                controller: 'StoreController'\n            }\n        }\n    }).state('store.product', {\n        url: '/store-product/{productId}',\n        views: {\n            '': {\n                templateUrl: 'storeProduct.html',\n                controller: 'StoreProductController'\n            }\n        }\n    }).state('store.sale', {\n        url: '/store-sale',\n        views: {\n            '': {\n                templateUrl: 'storeSale.html',\n                controller: 'StoreSaleController'\n            }\n        }\n    }).state('store.detail', {\n        url: '/store-detail',\n        views: {\n            '': {\n                templateUrl: 'storeDetail.html',\n                controller: 'StoreDetailController'\n            }\n        }\n    }).state('store.cart', {\n        url: '/store-cart',\n        views: {\n            '': {\n                templateUrl: 'storeCart.html',\n                //controller:'StoreCartController'\n                controllerProvider: function controllerProvider($state, $stateParams, checkAuth) {\n                    if (!checkAuth.check()) return $state.go('login');\n                    var ctrlName = \"StoreCartController\";\n                    return ctrlName;\n                }\n            }\n        }\n    }).state('accountCenter', {\n        url: '/account-center',\n        views: {\n            '': {\n                templateUrl: 'accountCenter.html',\n                //controller: 'AccountCenterController'\n                controllerProvider: function controllerProvider($state, $stateParams, checkAuth) {\n                    if (!checkAuth.check()) return $state.go('login');\n                    var ctrlName = \"AccountCenterController\";\n                    return ctrlName;\n                }\n            }\n        }\n    }).state('addressAccount', {\n        url: '/address-account',\n        params: { from: null },\n        views: {\n            '': {\n                templateUrl: 'addressAccount.html',\n                //controller:'AddressAccountController'\n                controllerProvider: function controllerProvider($state, $stateParams, checkAuth) {\n                    if (!checkAuth.check()) return $state.go('login');\n                    var ctrlName = \"AddressAccountController\";\n                    return ctrlName;\n                }\n            }\n        }\n    }).state('addressEdit', {\n        url: '/address-edit/{addrId}',\n        params: { from: null },\n        views: {\n            '': {\n                templateUrl: 'addressEdit.html',\n                //controller:'AddressEditController'\n                controllerProvider: function controllerProvider($state, $stateParams, checkAuth) {\n                    if (!checkAuth.check()) return $state.go('login');\n                    var ctrlName = \"AddressEditController\";\n                    return ctrlName;\n                }\n            }\n        }\n    }).state('card', {\n        url: '/card',\n        views: {\n            '': {\n                templateUrl: 'card.html',\n                //controller:'CardAccountController'\n                controllerProvider: function controllerProvider($state, $stateParams, checkAuth) {\n                    if (!checkAuth.check()) {\n                        return $state.go('login');\n                    }\n                    var ctrlName = \"CardController\";\n                    return ctrlName;\n                }\n            }\n        }\n    }).state('cardLogin', {\n        url: '/card-login',\n        params: { from: null },\n        views: {\n            '': {\n                templateUrl: 'cardLogin.html',\n                //controller:'CardAccountController'\n                controllerProvider: function controllerProvider($state, $stateParams, checkAuth) {\n                    if (!checkAuth.check()) {\n                        return $state.go('login');\n                    }\n                    var ctrlName = \"CardLoginController\";\n                    return ctrlName;\n                }\n            }\n        }\n    }).state('transactionDetail', {\n        url: '/transaction-detail',\n        views: {\n            '': {\n                templateUrl: 'transactionDetail.html',\n                //controller:'CardAccountController'\n                controllerProvider: function controllerProvider($state, $stateParams, checkAuth) {\n                    if (!checkAuth.check()) {\n                        return $state.go('login');\n                    }\n                    var ctrlName = \"TransactionDetailController\";\n                    return ctrlName;\n                }\n            }\n        }\n    }).state('orderList', {\n        url: '/order-list',\n        views: {\n            '': {\n                templateUrl: 'orderList.html',\n                //controller:'OrderListController'\n                controllerProvider: function controllerProvider($state, $stateParams, checkAuth) {\n                    if (!checkAuth.check()) return $state.go('login');\n                    var ctrlName = \"OrderListController\";\n                    return ctrlName;\n                }\n            }\n        }\n    }).state('orderDetail', {\n        url: '/order-detail/{orderId}',\n        views: {\n            '': {\n                templateUrl: 'orderDetail.html',\n                //controller:'OrderDetailController',\n                controllerProvider: function controllerProvider($state, $stateParams, checkAuth) {\n                    if (!checkAuth.check()) return $state.go('login');\n                    var ctrlName = \"OrderDetailController\";\n                    return ctrlName;\n                }\n            }\n        }\n    }).state('login', {\n        url: '/login',\n        views: {\n            '': {\n                templateUrl: 'login.html',\n                //controller: 'LoginController'\n                controllerProvider: function controllerProvider($state, $stateParams, checkAuth) {\n                    if (checkAuth.check()) return $state.go('accountCenter');\n                    var ctrlName = \"LoginController\";\n                    return ctrlName;\n                }\n            }\n        }\n\n    }).state('getOrder', {\n        url: '/getOrder',\n        views: {\n            '': {\n                templateUrl: 'getOrder.html',\n                //controller: 'GetOrderController'\n                controllerProvider: function controllerProvider($state, $stateParams, checkAuth) {\n                    if (!checkAuth.check()) return $state.go('login');\n                    var ctrlName = \"GetOrderController\";\n                    return ctrlName;\n                }\n            }\n        }\n\n    }).state('orderSucceed', {\n        url: '/order-succeed/{orderId}',\n        views: {\n            '': {\n                templateUrl: 'orderSucceed.html',\n                //controller:'OrderSucceedController'\n                controllerProvider: function controllerProvider($state, $stateParams, checkAuth) {\n                    if (!checkAuth.check()) return $state.go('login');\n                    var ctrlName = \"OrderSucceedController\";\n                    return ctrlName;\n                }\n            }\n        }\n    });\n\n    $urlRouterProvider.otherwise('/store/1/store-product/');\n});","/**\r\n * Created by gujun on 15/5/19.\r\n */\n\"use strict\";\nangular.module('ZJSY_WeChat').filter('card', function () {\n  return function (input, num) {\n    num = parseInt(num);\n    input = input.split(\"\");\n    var out = \"\";\n    for (var i in input) {\n      if (i < input.length - num) {\n        out += \"*\";\n      } else {\n        out += input[i];\n      }\n    }\n    return out;\n  };\n});","/**\n * Created by gujun on 15/12/4.\n */\n'use strict';\n\nangular.module('ZJSY_WeChat').factory('checkAuth', function () {\n    return {\n        check: function check() {\n            return X_context.authorization != \"guest\" && X_context.authorization;\n        }\n    };\n});","/**\r\n * Created by gujun on 15/4/28.\r\n */\n'use strict';\n\nangular.module('ZJSY_WeChat').factory('ajaxInterceptor', function ($q, $rootScope, $location) {\n  return {\n    response: function response(_response) {\n      if (_response.headers()['content-type'] === \"application/json; charset=utf-8\") {\n        // Validate response, if not ok reject\n        if (_response.data.code && _response.data.status) {\n          if (_response.data.status == \"ok\" && _response.data.code == \"200\") {\n            return _response;\n          } else {\n            $rootScope.$broadcast('alerts', { type: 'danger', message: _response.data.message || \"系统错误。\" });\n            return _response;\n          }\n        }\n      }\n      if (_response.data.status == 404) {\n        $rootScope.$broadcast('alerts', { type: 'danger', message: '资源不存在。' });\n        $location.path('/');\n        return _response;\n      }\n      return _response;\n    },\n    responseError: function responseError(response) {\n      $rootScope.$broadcast('alerts', { type: 'danger', message: response.data.message || \"系统错误。\" });\n      return response;\n    }\n  };\n});","/**\n * Created by gujun on 15/12/2.\n */\n'use strict';\n\nangular.module('ZJSY_WeChat').directive('scrollOnClick', function () {\n    return {\n        restrict: 'A',\n        link: function link(scope, $elm, attrs) {\n            var idToScroll = attrs.scrollhref;\n            var scrollBase = attrs.scrollbase;\n            var scrollFirst = attrs.scrollfirst;\n            $elm.on('click', function () {\n                var $target;\n                if (idToScroll) {\n                    $target = $(idToScroll);\n                }\n                $(scrollBase).animate({ scrollTop: $target.offset().top - $(scrollFirst).offset().top }, 200);\n            });\n        }\n    };\n});","/**\n * Created by gujun on 15/12/2.\n */\n\"use strict\";\n\nangular.module('ZJSY_WeChat').directive(\"bnLazySrc\", function ($window, $document) {\n\n    // I manage all the images that are currently being\n    // monitored on the page for lazy loading.\n    var lazyLoader = (function () {\n\n        // I maintain a list of images that lazy-loading\n        // and have yet to be rendered.\n        var images = [];\n\n        // I define the render timer for the lazy loading\n        // images to that the DOM-querying (for offsets)\n        // is chunked in groups.\n        var renderTimer = null;\n        var renderDelay = 100;\n\n        // I cache the window element as a jQuery reference.\n        var win = $($window);\n\n        // I cache the document document height so that\n        // we can respond to changes in the height due to\n        // dynamic content.\n        var doc = $document;\n        var documentHeight = doc.height();\n        var documentTimer = null;\n        var documentDelay = 2000;\n\n        // I determine if the window dimension events\n        // (ie. resize, scroll) are currenlty being\n        // monitored for changes.\n        var isWatchingWindow = false;\n\n        // ---\n        // PUBLIC METHODS.\n        // ---\n\n        // I start monitoring the given image for visibility\n        // and then render it when necessary.\n        function addImage(image) {\n\n            images.push(image);\n\n            if (!renderTimer) {\n\n                startRenderTimer();\n            }\n\n            if (!isWatchingWindow) {\n\n                startWatchingWindow();\n            }\n        }\n\n        // I remove the given image from the render queue.\n        function removeImage(image) {\n\n            // Remove the given image from the render queue.\n            for (var i = 0; i < images.length; i++) {\n\n                if (images[i] === image) {\n\n                    images.splice(i, 1);\n                    break;\n                }\n            }\n\n            // If removing the given image has cleared the\n            // render queue, then we can stop monitoring\n            // the window and the image queue.\n            if (!images.length) {\n\n                clearRenderTimer();\n\n                stopWatchingWindow();\n            }\n        }\n\n        // ---\n        // PRIVATE METHODS.\n        // ---\n\n        // I check the document height to see if it's changed.\n        function checkDocumentHeight() {\n\n            // If the render time is currently active, then\n            // don't bother getting the document height -\n            // it won't actually do anything.\n            if (renderTimer) {\n\n                return;\n            }\n\n            var currentDocumentHeight = doc.height();\n\n            // If the height has not changed, then ignore -\n            // no more images could have come into view.\n            if (currentDocumentHeight === documentHeight) {\n\n                return;\n            }\n\n            // Cache the new document height.\n            documentHeight = currentDocumentHeight;\n\n            startRenderTimer();\n        }\n\n        // I check the lazy-load images that have yet to\n        // be rendered.\n        function checkImages() {\n\n            // Log here so we can see how often this\n            // gets called during page activity.\n            //console.log( \"Checking for visible images...\" );\n\n            var visible = [];\n            var hidden = [];\n\n            // Determine the window dimensions.\n            var windowHeight = win.height();\n            var scrollTop = win.scrollTop();\n\n            // Calculate the viewport offsets.\n            var topFoldOffset = scrollTop;\n            var bottomFoldOffset = topFoldOffset + windowHeight;\n\n            // Query the DOM for layout and seperate the\n            // images into two different categories: those\n            // that are now in the viewport and those that\n            // still remain hidden.\n            for (var i = 0; i < images.length; i++) {\n\n                var image = images[i];\n\n                if (image.isVisible(topFoldOffset, bottomFoldOffset)) {\n\n                    visible.push(image);\n                } else {\n\n                    hidden.push(image);\n                }\n            }\n\n            // Update the DOM with new image source values.\n            for (var i = 0; i < visible.length; i++) {\n\n                visible[i].render();\n            }\n\n            // Keep the still-hidden images as the new\n            // image queue to be monitored.\n            images = hidden;\n\n            // Clear the render timer so that it can be set\n            // again in response to window changes.\n            clearRenderTimer();\n\n            // If we've rendered all the images, then stop\n            // monitoring the window for changes.\n            if (!images.length) {\n\n                stopWatchingWindow();\n            }\n        }\n\n        // I clear the render timer so that we can easily\n        // check to see if the timer is running.\n        function clearRenderTimer() {\n\n            clearTimeout(renderTimer);\n\n            renderTimer = null;\n        }\n\n        // I start the render time, allowing more images to\n        // be added to the images queue before the render\n        // action is executed.\n        function startRenderTimer() {\n\n            renderTimer = setTimeout(checkImages, renderDelay);\n        }\n\n        // I start watching the window for changes in dimension.\n        function startWatchingWindow() {\n\n            isWatchingWindow = true;\n\n            // Listen for window changes.\n            win.on(\"resize.bnLazySrc\", windowChanged);\n            win.on(\"scroll.bnLazySrc\", windowChanged);\n\n            //hardcode for productList\n            $('.lazy-sec').on(\"resize.bnLazySrc\", windowChanged);\n            $('.lazy-sec').on(\"scroll.bnLazySrc\", windowChanged);\n\n            // Set up a timer to watch for document-height changes.\n            documentTimer = setInterval(checkDocumentHeight, documentDelay);\n        }\n\n        // I stop watching the window for changes in dimension.\n        function stopWatchingWindow() {\n\n            isWatchingWindow = false;\n\n            // Stop watching for window changes.\n            win.off(\"resize.bnLazySrc\");\n            win.off(\"scroll.bnLazySrc\");\n\n            // Stop watching for document changes.\n            clearInterval(documentTimer);\n        }\n\n        // I start the render time if the window changes.\n        function windowChanged() {\n\n            if (!renderTimer) {\n\n                startRenderTimer();\n            }\n        }\n\n        // Return the public API.\n        return {\n            addImage: addImage,\n            removeImage: removeImage\n        };\n    })();\n\n    // ------------------------------------------ //\n    // ------------------------------------------ //\n\n    // I represent a single lazy-load image.\n    function LazyImage(element) {\n\n        // I am the interpolated LAZY SRC attribute of\n        // the image as reported by AngularJS.\n        var source = null;\n\n        // I determine if the image has already been\n        // rendered (ie, that it has been exposed to the\n        // viewport and the source had been loaded).\n        var isRendered = false;\n\n        // I am the cached height of the element. We are\n        // going to assume that the image doesn't change\n        // height over time.\n        var height = null;\n\n        // ---\n        // PUBLIC METHODS.\n        // ---\n\n        // I determine if the element is above the given\n        // fold of the page.\n        function isVisible(topFoldOffset, bottomFoldOffset) {\n\n            // If the element is not visible because it\n            // is hidden, don't bother testing it.\n            if (!element.is(\":visible\")) {\n\n                return false;\n            }\n\n            // If the height has not yet been calculated,\n            // the cache it for the duration of the page.\n            if (height === null) {\n\n                height = element.height();\n            }\n\n            // Update the dimensions of the element.\n            var top = element.offset().top;\n            var bottom = top + height;\n\n            // Return true if the element is:\n            // 1. The top offset is in view.\n            // 2. The bottom offset is in view.\n            // 3. The element is overlapping the viewport.\n            return top <= bottomFoldOffset && top >= topFoldOffset || bottom <= bottomFoldOffset && bottom >= topFoldOffset || top <= topFoldOffset && bottom >= bottomFoldOffset;\n        }\n\n        // I move the cached source into the live source.\n        function render() {\n\n            isRendered = true;\n\n            renderSource();\n        }\n\n        // I set the interpolated source value reported\n        // by the directive / AngularJS.\n        function setSource(newSource) {\n\n            source = newSource;\n\n            if (isRendered) {\n\n                renderSource();\n            }\n        }\n\n        // ---\n        // PRIVATE METHODS.\n        // ---\n\n        // I load the lazy source value into the actual\n        // source value of the image element.\n        function renderSource() {\n\n            element[0].src = source;\n        }\n\n        // Return the public API.\n        return {\n            isVisible: isVisible,\n            render: render,\n            setSource: setSource\n        };\n    }\n\n    // ------------------------------------------ //\n    // ------------------------------------------ //\n\n    // I bind the UI events to the scope.\n    function link($scope, element, attributes) {\n\n        var lazyImage = new LazyImage(element);\n\n        // Start watching the image for changes in its\n        // visibility.\n        lazyLoader.addImage(lazyImage);\n\n        // Since the lazy-src will likely need some sort\n        // of string interpolation, we don't want to\n        attributes.$observe(\"bnLazySrc\", function (newSource) {\n\n            lazyImage.setSource(newSource);\n        });\n\n        // When the scope is destroyed, we need to remove\n        // the image from the render queue.\n        $scope.$on(\"$destroy\", function () {\n\n            lazyLoader.removeImage(lazyImage);\n        });\n    }\n\n    // Return the directive configuration.\n    return {\n        link: link,\n        restrict: \"A\"\n    };\n});","/**\n * Created by gujun on 15/7/8.\n */\n\n'use strict';\n\nangular.module('ZJSY_WeChat').directive('alerts', function ($interval, $timeout) {\n    return {\n        restrict: 'E',\n        template: '<div class=\"site-alert col-sm-12 \">\\\n                <div ng-repeat=\"alert in alerts\" class=\"alert alert-danger alert-dismissible\" role=\"alert\">\\\n                    <button type=\"button\" class=\"close\" data-dismiss=\"alert\" ng-click=\"closeAlert($index)\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>\\\n                    <strong>{{alert.msg}}</strong></div>\\\n                </div>',\n        scope: true,\n        link: function link(scope) {\n            scope.alerts = [];\n\n            scope.closeAlert = function (index) {\n                scope.alerts.splice(index, 1);\n            };\n\n            //var interval = $interval(function(){scope.alerts = _.drop(scope.alerts)},5000);\n\n            scope.$on(\"$destroy\", function () {\n                //$interval.cancel(interval);\n\n            });\n\n            scope.$on('alerts', function (event, alert) {\n                scope.alerts.push({ type: alert.type, msg: alert.message });\n                $timeout(function () {\n                    scope.alerts = _.drop(scope.alerts);\n                }, 2000);\n            });\n        }\n    };\n});","\"use strict\";\nangular.module('ZJSY_WeChat').controller('TransactionDetailController', function ($scope, $state) {\n    $scope.title = '交易明细';\n    $scope.transaction = [{\n        number: '20151208092590',\n        order: '666666',\n        cost: '25',\n        order_date: '2015-12-08 00:00:20'\n    }];\n    $scope.goIndex = function () {\n        $state.go('store.product', { storeId: X_context.storeId });\n    };\n});","\"use strict\";\nangular.module('ZJSY_WeChat').controller('StoreSaleController', function ($scope, $http) {\n    \"use strict\";\n    $scope._ = _;\n\n    $scope.$parent.title = $scope.$parent.storeTitle;\n\n    console.log($scope.$parent.$parent.cart, $scope.$parent.$parent.storeId);\n\n    $scope.cart = $scope.$parent.$parent.cart;\n\n    $scope.hots = [];\n    $scope.$parent.storePromise.then(function () {\n        return $http.post(X_context.api + 'product/list', {\n            storeId: $scope.$parent.storeId,\n            isFav: \"true\"\n        }).success(function (data) {\n            _.forEach(data.data, function (pro, index) {\n                $scope.hots.push({\n                    id: pro.id,\n                    name: pro.name,\n                    num: pro.amount,\n                    img: pro.img ? pro.img : \"images/ph_1.jpg\",\n                    detail: pro.specification,\n                    cateId: pro.category,\n                    price: pro.marketPrice\n                });\n            });\n        });\n    });\n\n    //$scope.hots = [\n    //    {\n    //        id : 7,\n    //        name : \"中餐盒饭1\",\n    //        price : \"18.5\",\n    //        num : \"5\",\n    //        img : \"images/ph_1.jpg\",\n    //        detail : \"鸡腿饭是一道菜，使用鸡腿、青椒、黄瓜、米饭做成。依据食谱步骤来完成这道料理。照烧（照り焼き，てりやき，Teriyaki），知名日本菜肴及烹饪方法。\"\n    //    },\n    //    {\n    //        id : 10,\n    //        name : \"中餐盒饭4\",\n    //        price : \"18.5\",\n    //        num : \"5\",\n    //        img : \"images/ph_1.jpg\",\n    //        detail : \"鸡腿饭是一道菜，使用鸡腿、青椒、黄瓜、米饭做成。依据食谱步骤来完成这道料理。照烧（照り焼き，てりやき，Teriyaki），知名日本菜肴及烹饪方法。\"\n    //\n    //    },\n    //    {\n    //        id : 11,\n    //        name : \"中餐盒饭5\",\n    //        price : \"18.5\",\n    //        num : \"5\",\n    //        img : \"images/ph_1.jpg\",\n    //        detail : \"鸡腿饭是一道菜，使用鸡腿、青椒、黄瓜、米饭做成。依据食谱步骤来完成这道料理。照烧（照り焼き，てりやき，Teriyaki），知名日本菜肴及烹饪方法。\"\n    //\n    //    },\n    //    {\n    //        id : 12,\n    //        name : \"中餐盒饭6\",\n    //        price : \"18.5\",\n    //        num : \"5\",\n    //        img : \"images/ph_1.jpg\",\n    //        detail : \"鸡腿饭是一道菜，使用鸡腿、青椒、黄瓜、米饭做成。依据食谱步骤来完成这道料理。照烧（照り焼き，てりやき，Teriyaki），知名日本菜肴及烹饪方法。\"\n    //\n    //    },\n    //    {\n    //        id : 13,\n    //        name : \"西餐咖啡1\",\n    //        price : \"18.5\",\n    //        num : \"5\",\n    //        img : \"images/ph_1.jpg\",\n    //        detail : \"鸡腿饭是一道菜，使用鸡腿、青椒、黄瓜、米饭做成。依据食谱步骤来完成这道料理。照烧（照り焼き，てりやき，Teriyaki），知名日本菜肴及烹饪方法。\"\n    //\n    //    },\n    //    {\n    //        id : 14,\n    //        name : \"西餐咖啡2\",\n    //        price : \"18.5\",\n    //        num : \"5\",\n    //        img : \"images/ph_1.jpg\",\n    //        detail : \"鸡腿饭是一道菜，使用鸡腿、青椒、黄瓜、米饭做成。依据食谱步骤来完成这道料理。照烧（照り焼き，てりやき，Teriyaki），知名日本菜肴及烹饪方法。\"\n    //\n    //    }\n    //]\n\n    $scope.productDetail = {};\n    $scope.prodectShown = false;\n\n    $scope.mainHeight = $('body').css('height').split('px')[0] - $('.navTop').css('height').split('px')[0] - $('header').css('height').split('px')[0];\n\n    $scope.addProduct = function (id) {\n        console.log(id);\n        var exist = _.find($scope.cart.products, { id: id });\n        if (exist) {\n            if (exist.buyNum < exist.num) exist.buyNum++;\n        } else {\n            $scope.cart.products.push(_.clone(_.find($scope.hots, { id: id })));\n            _.find($scope.cart.products, { id: id }).buyNum = 1;\n        }\n    };\n\n    $scope.removeProduct = function (id) {\n        if (!_.find($scope.cart.products, { id: id })) return;\n        if (_.find($scope.cart.products, { id: id }).buyNum > 1) {\n            _.find($scope.cart.products, { id: id }).buyNum--;\n        } else {\n            $scope.cart.products = _.reject($scope.cart.products, { id: id });\n        }\n        if ($scope.cart.products.length == 0) {\n            $scope.showCart = false;\n        }\n    };\n\n    $scope.showProduct = function (id) {\n        //get data from api instead\n        console.log(id);\n        $scope.productDetail = _.find($scope.hots, { id: id });\n        if ($scope.productDetail) {\n            $scope.prodectShown = true;\n        }\n    };\n\n    $scope.fly = function ($event) {\n        flyItem($event);\n    };\n\n    function flyItem(event) {\n        if ($('.cart-img-zero').offset().top == 0) {\n            var offset = $('.cart-img').offset();\n        } else {\n            var offset = $('.cart-img-zero').offset();\n        }\n\n        var flyer = $('<img class=\"flyer\" src=\"images/bg_5.png\"/>');\n        flyer.fly({\n            start: {\n                left: event.pageX,\n                top: event.pageY\n            },\n            end: {\n                left: offset.left,\n                top: offset.top + 10,\n                width: 0,\n                height: 0\n            },\n            peed: 10, //越大越快，默认1.2\n            vertex_Rtop: 100,\n            onEnd: function onEnd() {\n                $('.flyer').remove();\n                $(\".shop em\").addClass(\"a-shake\");\n\n                setTimeout(function () {\n                    $(\".shop em\").removeClass(\"a-shake\");\n                }, 300);\n            }\n        });\n    }\n});","\n\"use strict\";\nangular.module('ZJSY_WeChat').controller('StoreProductController', function ($scope, $timeout, $http, $q, $stateParams) {\n\n    $scope._ = _;\n\n    $scope.$parent.title = $scope.$parent.storeTitle;\n\n    console.log($scope.$parent.$parent.cart, $scope.$parent.$parent.storeId);\n\n    $scope.cart = $scope.$parent.$parent.cart;\n\n    $scope.cateList = [];\n    $scope.proList = [];\n\n    var catePromise = $scope.$parent.storePromise.then(function () {\n        return $http.post(X_context.api + 'category/list', {\n            storeId: $scope.$parent.storeId\n        }).success(function (data) {\n            _.forEach(data.data, function (cate, index) {\n                $scope.cateList.push({\n                    name: cate.categoryName,\n                    sort: cate.sort,\n                    id: cate.id\n                });\n                _.sortBy($scope.cateList, function (n) {\n                    return n.sort;\n                });\n                for (var i in $scope.cateList) {\n                    $scope.cateList[i].sec = 'sec' + (parseInt(i) + 1);\n                }\n            });\n        });\n    });\n\n    var productPromise = $scope.$parent.storePromise.then(function () {\n        return $http.post(X_context.api + 'product/list', {\n            storeId: $scope.$parent.storeId\n        }).success(function (data) {\n            _.forEach(data.data, function (pro, index) {\n                $scope.proList.push({\n                    id: pro.id,\n                    name: pro.name,\n                    num: pro.amount,\n                    img: pro.image ? pro.image : \"images/ph_1.jpg\",\n                    detail: pro.specification,\n                    cateId: pro.category,\n                    price: pro.marketPrice\n                });\n            });\n        });\n    });\n\n    $scope.hotList = [];\n    $scope.$parent.storePromise.then(function () {\n        return $http.post(X_context.api + 'product/list', {\n            storeId: $scope.$parent.storeId,\n            isHot: true\n        }).success(function (data) {\n            _.forEach(data.data, function (pro, index) {\n                $scope.hotList.push({\n                    id: pro.id,\n                    name: pro.name,\n                    num: pro.amount,\n                    img: pro.image ? pro.image : \"images/ph_1.jpg\",\n                    detail: pro.specification,\n                    cateId: pro.category,\n                    price: pro.marketPrice\n                });\n            });\n        });\n    });\n\n    $q.all([catePromise, productPromise]).then(function () {\n\n        _.forEach($scope.cateList, function (item, index) {\n            item.products = _.filter($scope.proList, { cateId: item.id });\n        });\n        if ($stateParams.productId) {\n            console.log('hahaha', $scope.proList);\n            $scope.showProduct($stateParams.productId);\n        }\n    });\n\n    $scope.hots = $scope.hotList;\n\n    $scope.cates = $scope.cateList;\n\n    $scope.productDetail = {};\n    $scope.productShown = false;\n\n    //$scope.showCart = false;\n    //$scope.toggleCart = function(){\n    //   $scope.showCart =  !$scope.showCart;\n    //   $scope.$parent.showCart = $scope.showCart;\n    //};\n\n    //$scope.mainHeight = $('body').css('height').split('px')[0] -\n    //    $('.navTop').css('height').split('px')[0] -\n    //    $scope.$parent.navHeight-\n    //    $('header').css('height').split('px')[0];\n\n    $scope.$watch('$parent.navHeight', function () {\n        $scope.mainHeight = $('body').css('height').split('px')[0] - $('.navTop').css('height').split('px')[0] - $scope.$parent.navHeight - $('header').css('height').split('px')[0];\n    });\n    //$scope.proList = [];\n    //_.forEach($scope.cates,function(cate,index){\n    //    $scope.proList = $scope.proList.concat(cate.products);\n    //});\n\n    $scope.addProduct = function (id) {\n        var exist = _.find($scope.cart.products, { id: id });\n        if (exist) {\n            if (exist.buyNum < exist.num) exist.buyNum++;\n        } else {\n            $scope.cart.products.push(_.clone(_.find($scope.proList, { id: id })));\n            _.find($scope.cart.products, { id: id }).buyNum = 1;\n        }\n    };\n\n    $scope.removeProduct = function (id) {\n        if (!_.find($scope.cart.products, { id: id })) return;\n        if (_.find($scope.cart.products, { id: id }).buyNum > 1) {\n            _.find($scope.cart.products, { id: id }).buyNum--;\n        } else {\n            $scope.cart.products = _.reject($scope.cart.products, { id: id });\n        }\n        if ($scope.cart.products.length == 0) {\n            $scope.showCart = false;\n        }\n    };\n\n    $scope.showProduct = function (id) {\n        //get data from api instead\n        $scope.productDetail = _.find($scope.proList, { id: parseInt(id) });\n        if ($scope.productDetail) {\n            $scope.productShown = true;\n        }\n    };\n\n    $scope.fly = function ($event) {\n        flyItem($event);\n    };\n\n    function flyItem(event) {\n        if ($('.cart-img-zero').offset().top == 0) {\n            var offset = $('.cart-img').offset();\n        } else {\n            var offset = $('.cart-img-zero').offset();\n        }\n\n        var flyer = $('<img class=\"flyer\" src=\"images/bg_5.png\"/>');\n        flyer.fly({\n            start: {\n                left: event.pageX,\n                top: event.pageY\n            },\n            end: {\n                left: offset.left,\n                top: offset.top + 10,\n                width: 0,\n                height: 0\n            },\n            peed: 10, //越大越快，默认1.2\n            vertex_Rtop: 100,\n            onEnd: function onEnd() {\n                $('.flyer').remove();\n                $(\".shop em\").addClass(\"a-shake\");\n\n                setTimeout(function () {\n                    $(\".shop em\").removeClass(\"a-shake\");\n                }, 300);\n            }\n        });\n    }\n\n    //jquery\n\n    var scrollPass = true;\n    $scope.$$postDigest(function () {\n        scrollPass = true;\n    });\n    $scope.$parent.$$postDigest(function () {\n        scrollPass = true;\n    });\n\n    $(\".greens\").on('scroll', function () {\n\n        if (!scrollPass) {\n            return;\n        } else {\n            scrollPass = false;\n            console.log('scroll');\n        }\n\n        var headerTop = $(\".header\").height() + $scope.$parent.navHeight + $(\".sound\").height() + $(\".navTop\").height() + 30;\n\n        if ($scope.$parent.navHeight == 150) {\n            if (parseInt($(\".greens ul:eq(0)\").offset().top) < headerTop - 30) {\n                $scope.$parent.navHeight = 0;\n                //$scope.$apply();\n                $scope.$digest();\n                $scope.$parent.$digest();\n            }\n            scrollPass = true;\n        } else if ($scope.$parent.navHeight == 0) {\n            if (parseInt($(\".greens ul:eq(0)\").offset().top) >= headerTop - 30) {\n                $scope.$parent.navHeight = 150;\n                //$scope.$apply();\n                $scope.$digest();\n                $scope.$parent.$digest();\n            }\n            scrollPass = true;\n        }\n\n        for (var i = 0; i < $(\".greens ul\").length; i++) {\n            var top = parseInt($(\".greens ul:eq(\" + i + \")\").offset().top);\n            if (top < headerTop) {\n                $(\".sideNav li a\").removeClass(\"hover\");\n                $(\".sideNav li:eq(\" + i + \") a\").addClass(\"hover\");\n            }\n        }\n    });\n});","\"use strict\";\nangular.module('ZJSY_WeChat').controller('StoreDetailController', function ($scope) {\n\n    $scope.$parent.storePromise.then(function () {\n        $scope.storeDetail = {\n            name: $scope.$parent.storeDetail.storeName,\n            startrule: $scope.$parent.storeDetail.freight || 0,\n            distribution: $scope.$parent.storeDetail.freightfee || 0,\n            intro: $scope.$parent.storeDetail.introduce,\n            addr: $scope.$parent.storeDetail.address,\n            openTime: $scope.$parent.storeDetail.worktime,\n            tel: $scope.$parent.storeDetail.telephone,\n            storeImage: $scope.$parent.storeDetail.image || 'images/ph_3.jpg'\n\n        };\n    });\n});","\"use strict\";\n\nangular.module('ZJSY_WeChat').controller('StoreController', function ($scope, $location, $state, $stateParams, $http) {\n    $scope.storeTitle = \"\";\n    $scope.title = \"\";\n    $scope.navHeight = 150;\n\n    console.log('storeId', $stateParams.storeId);\n    $scope.storeId = $stateParams.storeId || X_context.storeId || 1;\n    X_context.storeId = $scope.storeId;\n    $scope.cart = $scope.$parent.cart;\n    $scope.notice = {};\n\n    $scope.storePromise = $http.post(X_context.api + 'store/list', {\n        storeId: $scope.storeId\n    }).success(function (data) {\n        $scope.storeDetail = data.data[0];\n        $scope.storeTitle = data.data[0].storeName;\n        $scope.title = data.data[0].storeName;\n        $scope.cart.min = data.data[0].freight;\n        $scope.cart.freightFee = data.data[0].freightfee;\n        $scope.notice.title = data.data[0].annTitle;\n        $scope.notice.content = data.data[0].announcement;\n    });\n\n    $scope.isActive = function (route) {\n        if (_.indexOf($location.path().split('/'), route.split('/')[1]) > 0) {\n            return true;\n        } else {\n            return false;\n        }\n    };\n\n    var swiper = new Swiper('.swiper-container', {\n        pagination: '.swiper-pagination',\n        slidesPerView: 1\n\n    });\n\n    $scope.showCart = false;\n    $scope.toggleCart = function () {\n        $scope.showCart = !$scope.showCart;\n    };\n\n    $scope.totalPrice = 0;\n    $scope.$watch('cart.products', function (cart) {\n        $scope.totalPrice = 0;\n        _.forEach($scope.cart.products, function (prod, key) {\n            $scope.totalPrice += prod.price * prod.buyNum;\n        });\n    }, true);\n\n    $scope.addProduct = function (id) {\n        console.log('id', id);\n        var exist = _.find($scope.cart.products, { id: id });\n        if (exist) {\n            if (exist.buyNum < exist.num) exist.buyNum++;\n        } else {\n            $scope.cart.products.push(_.clone(_.find($scope.proList, { id: id })));\n            _.find($scope.cart.products, { id: id }).buyNum = 1;\n        }\n    };\n\n    $scope.removeProduct = function (id) {\n        if (!_.find($scope.cart.products, { id: id })) return;\n        if (_.find($scope.cart.products, { id: id }).buyNum > 1) {\n            _.find($scope.cart.products, { id: id }).buyNum--;\n        } else {\n            $scope.cart.products = _.reject($scope.cart.products, { id: id });\n        }\n        if ($scope.cart.products.length == 0) {\n            $scope.showCart = false;\n        }\n    };\n\n    $scope.goToCart = function () {\n        if ($scope.totalPrice == 0) return;\n        $state.transitionTo('store.cart');\n    };\n\n    $scope.getOrder = function () {\n        if ($scope.totalPrice == 0) return;\n        $scope.$parent.order.product = $scope.cart.products;\n        $scope.$parent.order.storeId = $scope.storeId;\n        $state.transitionTo('getOrder');\n    };\n\n    $scope.goIndex = function () {\n        $state.go('store.product', { storeId: X_context.storeId });\n    };\n});","\"use strict\";\nangular.module('ZJSY_WeChat').controller('StoreCartController', function ($scope, $http, $stateParams, $state) {\n    $scope.$parent.title = \"购物车\";\n\n    $scope.cart = $scope.$parent.$parent.cart;\n\n    //$scope.username = \"陈冠希\";\n    //$scope.phone = \"13232311009\";\n    //$scope.address = \"香港XX摄影工作室\";\n    $scope.$parent.memberPromise.then(function () {\n        $http.post(X_context.api + \"addr/list\", {\n            memberId: X_context.memberId,\n            addrId: $stateParams.addrId\n        }).success(function (data) {\n            var datas = data.data;\n            $scope.username = datas[0].receiver;\n            $scope.phone = datas[0].mobile;\n            $scope.address = datas[0].addressFullname;\n        });\n    });\n\n    $scope.mainHeight = $('body').css('height').split('px')[0] - $('header').css('height').split('px')[0];\n\n    $scope.selectAddress = function () {\n        $state.go('addressAccount', { from: { fromCart: true } });\n    };\n});","\"use strict\";\nangular.module(\"ZJSY_WeChat\").controller(\"OrderSucceedController\", function ($scope, $state, $http, $stateParams) {\n    console.log($stateParams.orderId);\n    $scope.title = \"购物成功\";\n    //$scope.telphone='012-7654987';\n\n    var orderListApi = X_context.api + \"order/list\";\n    $http.post(orderListApi, {\n        id: $stateParams.orderId\n    }).success(function (data) {\n        console.log(data.data);\n        var datas = data.data;\n        if (!datas[0]) {\n            return;\n        }\n        $scope.orderSucceed = {\n            orderNumber: datas[0].orderSn,\n            quantity: datas[0].orderDetail.length,\n            payway: datas[0].paymentMethod,\n            distribution: datas[0].shippingPrice,\n            expense: datas[0].totalPrice\n        };\n    });\n\n    //telphone:datas[0].telephone\n\n    $scope.goIndex = function () {\n        $state.go('store.product', { storeId: X_context.storeId });\n    };\n});","\"use strict\";\nangular.module('ZJSY_WeChat').controller('OrderListController', function ($scope, $http, $state) {\n    var orderListApi = X_context.api + \"order/list\";\n    //console.log('parent',$scope.$parent);\n    $scope.title = \"我的订单\";\n    $scope.orderlist = [];\n\n    $http.post(orderListApi, {}).success(function (data) {\n        if (!data.data) return;\n        for (var i in data.data) {\n            var order = {\n                number: data.data[i].id,\n                states: data.data[i].orderStatus,\n                orderDate: data.data[i].createDate,\n                products: [],\n                total: data.data[i].totalPrice,\n                totalNum: data.data[i].orderDetail ? data.data[i].orderDetail.length : 0\n            };\n            _.forEach(data.data[i].orderDetail, function (item, i) {\n                order.products.push({\n                    quantity: item.quantity,\n                    image: item.image,\n                    id: item.id\n                });\n            });\n\n            $scope.orderlist.push(order);\n        }\n    });\n    $scope.goIndex = function () {\n        $state.go('store.product', { storeId: X_context.storeId });\n    };\n});","\"use strict\";\nangular.module('ZJSY_WeChat').controller('OrderDetailController', function ($scope, $stateParams, $http, $state) {\n    console.log($stateParams.orderId);\n\n    $scope.title = '我的订单';\n    var orderListApi = X_context.api + \"order/list\";\n\n    $scope.orderpills = [];\n\n    $http.post(orderListApi, {\n        id: $stateParams.orderId\n    }).success(function (data) {\n        console.log(data.data);\n        var datas = data.data;\n        if (!datas[0]) {\n            return;\n        }\n        $scope.orderone = {\n            orderNum: datas[0].orderSn,\n            states: datas[0].orderStatus,\n            address: datas[0].address,\n            guest: datas[0].receiver,\n            payway: datas[0].paymentMethod,\n            total: datas[0].totalPrice,\n            carriage: datas[0].shippingPrice,\n            //credits:datas[0].userPoint,\n            realpay: datas[0].totalPrice + datas[0].shippingPrice,\n            orderpills: []\n\n        };\n\n        _.forEach(datas[0].orderDetail, function (item) {\n\n            $scope.orderone.orderpills.push({\n                quantity: item.quantity,\n                standard: item.unitName,\n                brands: item.productName,\n                weight: item.itemSn,\n                id: item.id,\n                price: item.unitPrice\n\n            });\n        });\n        $scope.orderpills.push($scope.orderone);\n    });\n\n    $scope.goIndex = function () {\n        $state.go('store.product', { storeId: X_context.storeId });\n    };\n});","'use strict';\n\nangular.module('ZJSY_WeChat').controller('MainController', function ($scope, $location, $http) {\n    \"use strict\";\n    $scope.memberPromise = null;\n    $scope.cart = {\n        products: [\n            //{\n            //    id: 0,\n            //    name: \"雀巢麦片\",\n            //    num: 156,\n            //    img: \"images/ph_1.jpg\",\n            //    detail: \"营养高，味道好\",\n            //    cateId: 1,\n            //    price: 30,\n            //    buyNum: 1\n            //}\n        ],\n        min: 0,\n        freightFee: 0\n    };\n    $scope.order = {\n        storeId: 1,\n        product: [{\n            id: 1,\n            name: \"雀巢麦片\",\n            num: 99999,\n            img: \"https://www.baidu.com/img/bd_logo1.png\",\n            detail: \"frfr飒飒\",\n            cateId: 29,\n            price: 30,\n            buyNum: 1\n        }]\n    };\n    if (X_context.authorization && X_context.authorization != X_context.guest) {\n        $scope.memberPromise = $http.get(X_context.api + 'member/getCurMem').success(function (data) {\n            if (!data.data[0]) return;\n            X_context.memberId = data.data[0]._id;\n            X_context.memberPhone = data.data[0].mobile;\n        });\n    }\n    $scope.isActive = function (route) {\n        if (_.indexOf($location.path().split('/'), route.split('/')[1]) > 0) {\n            return true;\n        } else {\n            return false;\n        }\n    };\n});","\"use strict\";\nangular.module('ZJSY_WeChat').controller('LoginController', function ($scope, $interval, $http) {\n\n    $scope.login = {\n        title: '验证手机'\n    };\n\n    var btnStr = '获取验证码';\n    $scope.telphone = '';\n    $scope.captcha = '';\n    $scope.captchaBtn = btnStr;\n    $scope.captchaDisabled = false;\n\n    $scope.setTime = function () {\n        if ($scope.captchaDisabled == true) {\n            return;\n        }\n        $http.post(X_context.api + \"member/fetchAuthCode\", {\n            \"phoneNum\": $scope.telphone\n        }).success(function (data) {\n            console.log(data);\n            $scope.captchaDisabled = true;\n            $scope.ensureBtn = true;\n            var timer = 60;\n            var interval = $interval(function () {\n                $scope.captchaBtn = '请您稍后:' + timer;\n                timer--;\n                if (timer == 0) {\n                    $interval.cancel(interval);\n                    $scope.captchaDisabled = false;\n                    $scope.captchaBtn = btnStr;\n                }\n            }, 1000);\n        });\n    };\n\n    $scope.phoneReg = /^([0-9]{11})$/;\n\n    $scope.getEnSure = function () {\n        if ($scope.telphone != null && $scope.phoneReg.test($scope.telphone)) {\n            $scope.captchaDisabled = false;\n            console.log($scope.captchaDisabled);\n            $http.post(X_context.api + \"member/weixinLogin\", {\n                phoneNum: $scope.telphone,\n                authCode: $scope.captcha\n            }).success(function (data) {\n                console.log('data.data.token', data.data.token);\n                if (data.data.token) {\n                    X_context.authorization = data.data.token;\n                    $http.defaults.headers.post['Authorization'] = X_context.authorization;\n                    $http.defaults.headers.put['Authorization'] = X_context.authorization;\n                    $http.defaults.headers.get['Authorization'] = X_context.authorization;\n                    $http.defaults.headers['delete']['Authorization'] = X_context.authorization;\n                    //$cookies.put('authorization',X_context.authorization);\n                    createCookie('authorization', X_context.authorization);\n\n                    $scope.$parent.memberPromise = $http.get(X_context.api + 'member/getCurMem').success(function (data) {\n                        if (!data.data[0]) return;\n                        X_context.memberId = data.data[0]._id;\n                        X_context.memberPhone = data.data[0].mobile;\n                    });\n                }\n                window.history.back();\n            });\n        }\n        //else{\n        //    $scope.captchaDisabled=true;\n        //    console.log( $scope.captchaDisabled);\n        //}\n    };\n\n    //$(function(){\n    //    $scope.befocus=function(){\n    //        $('#usertel').focus();\n    //    }\n    //    $scope.getfocus=function(){\n    //        $('#usercheck').focus();\n    //    }\n    //});\n});","\"use strict\";\nangular.module('ZJSY_WeChat').controller('GetOrderController', function ($scope, $location, $state, $stateParams, $http) {\n    $scope.order = $scope.$parent.order;\n    $scope.cart = $scope.$parent.cart;\n\n    //$scope.username = \"陈冠希\";\n    //$scope.phone = \"13232311009\";\n    //$scope.address = \"香港XX摄影工作室\";\n\n    $scope.payOption = \"delivery\";\n\n    var posted = false;\n\n    $scope.totalPrice = 0;\n    _.forEach($scope.order.product, function (item, index) {\n        $scope.totalPrice += item.price * item.buyNum;\n    });\n\n    $scope.postOrder = function () {\n        if (posted == true) return;\n        posted = true;\n        var orderList = [];\n        _.forEach($scope.order.product, function (item, index) {\n            orderList.push({\n                productId: item.id,\n                quantity: item.buyNum,\n                unitPrice: item.price\n            });\n        });\n        $http.post(X_context.api + 'order/add', {\n            \"storeId\": $scope.order.storeId,\n            \"address\": $scope.address,\n            \"orderStatus\": \"未处理\",\n            \"payMethod\": $scope.payOption == \"delivery\" ? \"现金\" : \"一卡通\",\n            \"phone\": $scope.phone,\n            \"receiver\": $scope.username,\n            \"orderItems\": orderList\n\n        }).success(function (data) {\n            $scope.cart.products = [];\n            $state.go('orderSucceed', { orderId: data.data[0]._id });\n        });\n    };\n\n    $scope.$parent.memberPromise.then(function () {\n        $http.post(X_context.api + \"addr/list\", {\n            memberId: X_context.memberId,\n            addrId: $stateParams.addrId\n        }).success(function (data) {\n            var datas = data.data;\n            $scope.username = datas[0].receiver;\n            $scope.phone = datas[0].mobile;\n            $scope.address = datas[0].addressFullname;\n        });\n    });\n\n    $scope.postOrderAndPay = function () {\n\n        if (posted == true) return;\n        posted = true;\n        var orderList = [];\n        _.forEach($scope.order.product, function (item, index) {\n            orderList.push({\n                productId: item.id,\n                quantity: item.buyNum,\n                unitPrice: item.price\n            });\n        });\n        $http.post(X_context.api + 'order/add', {\n            \"storeId\": $scope.order.storeId,\n            \"address\": $scope.address,\n            \"orderStatus\": \"未处理\",\n            \"payMethod\": $scope.payOption == \"delivery\" ? \"现金\" : \"一卡通\",\n            \"phone\": $scope.phone,\n            \"receiver\": $scope.username,\n            \"orderItems\": orderList\n\n        }).success(function (data) {\n            $scope.cart.products = [];\n            $state.go('cardLogin', { from: { fromOrder: true, orderId: data.data[0]._id } });\n        });\n    };\n});","\"use strict\";\nangular.module('ZJSY_WeChat').controller('CardLoginController', function ($scope, $interval, $http, $stateParams, $state) {\n\n    $scope.fromOrder = $stateParams.from && $stateParams.from.fromOrder;\n    $scope.orderId = $stateParams.from && $stateParams.from.orderId;\n\n    $scope.showEdit = false;\n    $scope.card = {\n        title: '一卡通',\n        num: \"\",\n        pwd: \"\"\n    };\n    $scope.originNo = \"\";\n\n    $scope.payModal = false;\n\n    var posted = false;\n    var payPosted = false;\n\n    $scope.editCard = function ($event) {\n        $event.stopPropagation();\n        $scope.showEdit = true;\n    };\n\n    $scope.goIndex = function () {\n        $state.go('store.product', { storeId: X_context.storeId });\n    };\n\n    $scope.getEnSure = function () {\n        if ($scope.card.num == null) return;\n        if (posted == true) return;\n        posted = true;\n\n        if (!$scope.showEdit) {\n            if ($scope.fromOrder) {\n                console.log($stateParams.from.orderId);\n                $scope.payModal = true;\n                //$state.go('orderSucceed');\n                $scope.showEdit = false;\n                posted = false;\n            } else {\n                $scope.showEdit = false;\n                posted = false;\n            }\n        } else {\n            if ($scope.card.num != $scope.originNo) {\n                $http.post(X_context.api + \"member/updateCard\", {\n                    memberId: X_context.memberId,\n                    cardNo: $scope.card.num\n                }).success(function (data) {\n                    $state.go($state.current, $stateParams, { reload: true, inherit: false });\n                    $scope.showEdit = false;\n                    posted = false;\n                });\n            }\n            $scope.showEdit = false;\n            posted = false;\n        }\n    };\n\n    $scope.pay = function () {\n        if (payPosted == true) return;\n        payPosted = true;\n        if (!$scope.card.pwd || !$scope.card.num || !$scope.orderId) return;\n        $http.post(X_context.api + 'pay/consume', {\n            \"orderId\": $scope.orderId,\n            \"memberCard\": $scope.card.num,\n            \"passwd\": $scope.card.pwd\n        }).success(function (data) {\n            $scope.$parent.cart.products = [];\n            payPosted = false;\n            $state.go('orderSucceed', { orderId: data.data[0]._id });\n        }).error(function (data) {\n            console.log(data);\n            payPosted = false;\n            $state.go('orderSucceed', { orderId: data.data[0]._id });\n        });\n    };\n\n    $http.get(X_context.api + 'member/getCurMem').success(function (data) {\n        $scope.card.num = data.data[0].allincardNo;\n        $scope.originNo = data.data[0].allincardNo;\n    });\n});","\"use strict\";\nangular.module('ZJSY_WeChat').controller('CardController', function ($scope, $state) {\n    $scope.card = {\n        title: '我的一卡通'\n    };\n    $scope.goIndex = function () {\n        $state.go('store.product', { storeId: X_context.storeId });\n    };\n});","\"use strict\";\nangular.module('ZJSY_WeChat').controller('AddressEditController', function ($scope, $stateParams, $http, $state) {\n    $scope.title = '编辑地址';\n\n    var addressAccountListApi = X_context.api + \"addr/list\";\n    console.log('$stateParams.addrId', $stateParams.addrId);\n\n    if ($stateParams.addrId) {\n        $http.post(addressAccountListApi, {\n            addrId: $stateParams.addrId\n        }).success(function (data) {\n            var datas = data.data;\n            $scope.user = datas[0].receiver;\n            $scope.telphone = datas[0].mobile;\n            $scope.detailArea = datas[0].addressFullname;\n        });\n    };\n\n    $scope.update = function () {\n        if (!$stateParams.addrId) {\n            $http.post(X_context.api + \"addr/add\", {\n                \"member\": X_context.memberId,\n                \"receiver\": $scope.user,\n                \"addressFullname\": $scope.detailArea,\n                \"mobile\": $scope.telphone\n            }).success(function (data) {\n                console.log(data.data);\n                $scope.goBack();\n            });\n        } else {\n            $http.post(X_context.api + \"addr/update\", {\n                \"addrId\": $stateParams.addrId,\n                \"receiver\": $scope.user,\n                \"addressFullname\": $scope.detailArea,\n                \"mobile\": $scope.telphone\n            }).success(function (data) {\n                console.log(data);\n                $scope.goBack();\n            });\n        }\n    };\n\n    console.log(\"$stateParams\", $stateParams.from && $stateParams.from.fromCart);\n    $scope.goBack = function () {\n        if ($stateParams.from && $stateParams.from.fromCart) {\n            return $state.go('store.cart');\n        } else {\n            window.history.back();\n        }\n    };\n\n    $scope.goIndex = function () {\n        $state.go('store.product', { storeId: X_context.storeId });\n    };\n});","\"use strict\";\nangular.module('ZJSY_WeChat').controller('AddressAccountController', function ($scope, $state, $stateParams, $http) {\n\n    $scope.title = \"收货地址\";\n    $scope.addNewAddr = false;\n    $scope.address = {\n        id: null\n    };\n\n    $scope.$parent.memberPromise.then(function () {\n        $http.post(X_context.api + \"addr/list\", {\n            memberId: X_context.memberId,\n            addrId: $stateParams.addrId\n        }).success(function (data) {\n            var datas = data.data;\n            if (datas.length == 0) {\n                $scope.addNewAddr = true;\n                return;\n            }\n            $scope.address.id = datas[0].id;\n            $scope.address.user = datas[0].receiver;\n            $scope.address.telphone = datas[0].mobile;\n            $scope.address.detailArea = datas[0].addressFullname;\n        });\n    });\n\n    console.log(\"$stateParams\", $stateParams.from && $stateParams.from.fromCart);\n\n    $scope.goToCart = function () {\n        if ($stateParams.from && $stateParams.from.fromCart) {\n            $state.go('store.cart');\n        }\n    };\n\n    $scope.editAddress = function () {\n        $state.go('addressEdit', { from: { fromCart: $stateParams.from && $stateParams.from.fromCart }, addrId: $scope.address.id });\n    };\n\n    $scope.goIndex = function () {\n        $state.go('store.product', { storeId: X_context.storeId });\n    };\n});","\"use strict\";\nangular.module('ZJSY_WeChat').controller('AccountCenterController', function ($scope, $state, $http) {\n    console.log('X_context.memberPhone', X_context.memberPhone);\n    if ($scope.$parent.memberPromise) {\n        $scope.$parent.memberPromise.then(function () {\n            $scope.account = {\n                title: '我的中心',\n                tel: X_context.memberPhone,\n                contact: '021-12345678',\n                payWay: '一卡通'\n            };\n        });\n    } else {\n        $scope.account = {\n            title: '我的中心',\n            tel: X_context.memberPhone,\n            contact: '021-12345678',\n            payWay: '一卡通'\n        };\n    }\n\n    $scope.signOut = function () {\n        console.log('here,logout');\n        X_context.authorization = X_context.guest;\n        eraseCookie('authorization');\n        $state.go('store.product', { storeId: X_context.storeId });\n    };\n    $scope.goIndex = function () {\n        $state.go('store.product', { storeId: X_context.storeId });\n    };\n});","/**\n * Created by gujun on 15/12/2.\n */\n'use strict';\n\n(function ($) {\n    $.fly = function (element, options) {\n        // 默认值\n        var defaults = {\n            version: '1.0.0',\n            autoPlay: true,\n            vertex_Rtop: 20, // 默认顶点高度top值\n            speed: 1.2,\n            start: {}, // top, left, width, height\n            end: {},\n            onEnd: $.noop\n        };\n\n        var self = this,\n            $element = $(element);\n\n        /**\n         * 初始化组件，new的时候即调用\n         */\n        self.init = function (options) {\n            this.setOptions(options);\n            !!this.settings.autoPlay && this.play();\n        };\n\n        /**\n         * 设置组件参数\n         */\n        self.setOptions = function (options) {\n            this.settings = $.extend(true, {}, defaults, options);\n            var settings = this.settings,\n                start = settings.start,\n                end = settings.end;\n\n            $element.css({ marginTop: '0px', marginLeft: '0px', position: 'absolute' }).appendTo('body');\n            /* 运动过程中有改变大小\n             if (end.width != null && end.height != null) {\n             $.extend(true, start, {\n             width: $element.width(),\n             height: $element.height()\n             });\n             }\n             */ // 运动轨迹最高点top值\n            var vertex_top = Math.min(start.top, end.top) - Math.abs(start.left - end.left) / 3;\n            if (vertex_top < settings.vertex_Rtop) {\n                // 可能出现起点或者终点就是运动曲线顶点的情况\n                vertex_top = Math.min(settings.vertex_Rtop, Math.min(start.top, end.top));\n            }\n\n            /**\n             * ======================================================\n             * 运动轨迹在页面中的top值可以抽象成函数 y = a * x*x + b;\n             * a = curvature\n             * b = vertex_top\n             * ======================================================\n             */\n\n            var distance = Math.sqrt(Math.pow(start.top - end.top, 2) + Math.pow(start.left - end.left, 2)),\n\n            // 元素移动次数\n            steps = Math.ceil(Math.min(Math.max(Math.log(distance) / 0.05 - 75, 30), 100) / settings.speed),\n                ratio = start.top == vertex_top ? 0 : -Math.sqrt((end.top - vertex_top) / (start.top - vertex_top)),\n                vertex_left = (ratio * start.left - end.left) / (ratio - 1),\n\n            // 特殊情况，出现顶点left==终点left，将曲率设置为0，做直线运动。\n            curvature = end.left == vertex_left ? 0 : (end.top - vertex_top) / Math.pow(end.left - vertex_left, 2);\n\n            $.extend(true, settings, {\n                count: -1, // 每次重置为-1\n                steps: steps,\n                vertex_left: vertex_left,\n                vertex_top: vertex_top,\n                curvature: curvature\n            });\n        };\n\n        /**\n         * 开始运动，可自己调用\n         */\n        self.play = function () {\n            this.move();\n        };\n\n        /**\n         * 按step运动\n         */\n        self.move = function () {\n            var settings = this.settings,\n                start = settings.start,\n                count = settings.count,\n                steps = settings.steps,\n                end = settings.end;\n            // 计算left top值\n            var left = start.left + (end.left - start.left) * count / steps,\n                top = settings.curvature == 0 ? start.top + (end.top - start.top) * count / steps : settings.curvature * Math.pow(left - settings.vertex_left, 2) + settings.vertex_top;\n            // 运动过程中有改变大小\n            if (end.width != null && end.height != null) {\n                var i = steps / 2,\n                    width = end.width - (end.width - start.width) * Math.cos(count < i ? 0 : (count - i) / (steps - i) * Math.PI / 2),\n                    height = end.height - (end.height - start.height) * Math.cos(count < i ? 0 : (count - i) / (steps - i) * Math.PI / 2);\n                $element.css({ width: width + \"px\", height: height + \"px\", \"font-size\": Math.min(width, height) + \"px\" });\n            }\n            $element.css({\n                left: left + \"px\",\n                top: top + \"px\"\n            });\n            settings.count++;\n            // 定时任务\n            var time = window.requestAnimationFrame($.proxy(this.move, this));\n            if (count == steps) {\n                window.cancelAnimationFrame(time);\n                // fire callback\n                settings.onEnd.apply(this);\n            }\n        };\n\n        /**\n         * 销毁\n         */\n        self.destroy = function () {\n            $element.remove();\n        };\n\n        self.init(options);\n    };\n\n    // add the plugin to the jQuery.fn object\n    $.fn.fly = function (options) {\n        return this.each(function () {\n            if (undefined == $(this).data('fly')) {\n                $(this).data('fly', new $.fly(this, options));\n            }\n        });\n    };\n})(jQuery);\n/*\n * jquery.fly\n *\n * 抛物线动画\n * @github https://github.com/amibug/fly\n * Copyright (c) 2014 wuyuedong\n * copy from tmall.com\n */","/**\n * Created by gujun on 15/12/8.\n */\n\"use strict\";\n\nfunction createCookie(name, value, days) {\n    var expires;\n\n    if (days) {\n        var date = new Date();\n        date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);\n        expires = \"; expires=\" + date.toGMTString();\n    } else {\n        expires = \"\";\n    }\n    document.cookie = encodeURIComponent(name) + \"=\" + encodeURIComponent(value) + expires + \"; path=/\";\n}\n\nfunction readCookie(name) {\n    var nameEQ = encodeURIComponent(name) + \"=\";\n    var ca = document.cookie.split(';');\n    for (var i = 0; i < ca.length; i++) {\n        var c = ca[i];\n        while (c.charAt(0) === ' ') c = c.substring(1, c.length);\n        if (c.indexOf(nameEQ) === 0) return decodeURIComponent(c.substring(nameEQ.length, c.length));\n    }\n    return null;\n}\n\nfunction eraseCookie(name) {\n    createCookie(name, \"\", -1);\n}",null],"sourceRoot":"/source/"}